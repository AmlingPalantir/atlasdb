apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'checkstyle'
apply plugin: 'maven'
apply plugin: 'maven-publish'

sourceCompatibility = 1.7
targetCompatibility = 1.7

version = rootProject.version
group = rootProject.group

buildscript {
    repositories { jcenter() }
    dependencies { classpath 'com.github.jengelman.gradle.plugins:shadow:1.2.1' }
}

repositories {
    mavenCentral()
    maven {
        url 'http://dl.bintray.com/palantir/releases/'
    }
}

apply plugin: 'com.github.johnrengelman.shadow'

dependencies {
    compile(group: 'com.datastax.cassandra', name: 'cassandra-driver-core', version: '2.1.5', configuration: 'default') {
        exclude(module:"snappy-java")
        exclude(group:'org.slf4j')
    }
}

shadowJar {
    mergeServiceFiles()
    relocate 'com.google', 'com.datastax.palantirshaded.google'
    relocate 'com.codahale.metrics', 'com.datastax.palantirshaded.metrics'
    relocate 'org.jboss.netty', 'com.datastax.shaded.netty'
}

publishing {
    publications {
        local(MavenPublication) {
            artifact(shadowJar) {
                extension "jar"
            }
        }
    }
    repositories {
        maven {
            url localPublishDir
        }
    }
}
