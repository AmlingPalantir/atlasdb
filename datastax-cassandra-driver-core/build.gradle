apply from: "../gradle/shared.gradle"

buildscript {
    repositories { jcenter() }
    dependencies { classpath 'com.github.jengelman.gradle.plugins:shadow:1.2.1' }
}

apply plugin: 'com.github.johnrengelman.shadow'

dependencies {
    compile(group: 'com.datastax.cassandra', name: 'cassandra-driver-core', version: '2.1.5', configuration: 'default') {
        exclude(module:"snappy-java")
        exclude(group:'org.slf4j')
    }
}

shadowJar {
    mergeServiceFiles()
    relocate 'com.google', 'com.datastax.palantirshaded.google'
    relocate 'com.codahale.metrics', 'com.datastax.palantirshaded.metrics'
    relocate 'org.jboss.netty', 'com.datastax.shaded.netty'
}

publishing {
    publications {
        local(MavenPublication) {
            artifacts = [shadowJar]
        }
    }
}
