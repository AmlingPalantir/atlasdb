apply plugin: 'org.inferred.processors'
apply plugin: 'com.github.johnrengelman.shadow'

apply from: '../gradle/shared.gradle'

dependencies {
  compile project(':atlasdb-service')
  compile group: 'com.google.dagger', name: 'dagger', version: libVersions.dagger

  processor group: 'com.google.dagger', name: 'dagger-compiler', version: libVersions.dagger
  processor group: 'org.immutables', name: 'value', version: libVersions.immutables

  shadow project(':atlasdb-service')
}

shadowJar {
  mergeServiceFiles()

  relocate('dagger', 'com.palantir.atlasdb.shaded.dagger')

  dependencies {
    include dependency(group: 'com.google.dagger', name: 'dagger', version: libVersions.dagger)
  }
}
